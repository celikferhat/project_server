<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="author" content="Hau Nguyen">
    <meta name="keywords" content="au theme template">

    <!-- Title Page-->
    <title>Gunluk</title>

    <!-- Fontfaces CSS-->
    <link href="css/font-face.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-5/css/fontawesome-all.min.css" rel="stylesheet" media="all">
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">

    <!-- Bootstrap CSS-->
    <link href="vendor/bootstrap-4.1/bootstrap.min.css" rel="stylesheet" media="all">

    <!-- Vendor CSS-->
    <link href="vendor/animsition/animsition.min.css" rel="stylesheet" media="all">
    <link href="vendor/bootstrap-progressbar/bootstrap-progressbar-3.3.4.min.css" rel="stylesheet" media="all">
    <link href="vendor/wow/animate.css" rel="stylesheet" media="all">
    <link href="vendor/css-hamburgers/hamburgers.min.css" rel="stylesheet" media="all">
    <link href="vendor/slick/slick.css" rel="stylesheet" media="all">
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/perfect-scrollbar/perfect-scrollbar.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="css/theme.css" rel="stylesheet" media="all">

</head>
<body class="animsition">





<div class="page-wrapper">
<aside class="menu-sidebar d-none d-lg-block">
            <div class="logo">
                <a href="#">
                    <img src="images/icon/logo.png" alt="Cool Admin" />
                </a>
            </div>
            <div class="menu-sidebar__content js-scrollbar1">
                <nav class="navbar-sidebar">
                    <ul class="list-unstyled navbar__list">
                        <li>
                            <a class="js-arrow" href="myindex.html">
                                <i class="fas fa-tachometer-alt"></i>Tüm Veriler</a>                           
                        </li>
                        <li  class="active">
                            <a href="gunluk.html">
                                <i class="fas fa-chart-bar"></i>Günlük</a>
                        </li>
                        <li>
                            <a href="weekly.html">
                                <i class="fas fa-table"></i>Haftalık</a>
                        </li>
                        
                    </ul>
                </nav>
            </div>
        </aside>
		<div class="page-container">
		<br>
				<div align="center">			
					<button class="btn btn-primary btn-sm" onclick="geri()" >
                        <i class="fa fa-chevron-circle-left"></i> &nbsp;Geri&nbsp;</button>								
										
										<h id="sayfa_num"> &nbsp; 1 &nbsp; </h>
										
										
					<button class="btn btn-primary btn-sm" onclick="ileri()" >
                        &nbsp;İleri &nbsp;<i class="fa fa-chevron-circle-right"></i></button>		
										
										
					</div>	
			<div class="main-content">
			
			
			
			
				<div class="section__content section__content--p30">	
					<div class="container-fluid">
					<div align="right">
					<button class="btn btn-primary btn-sm" onclick="grafik();radar()" >
                                        <i class="fa fa-refresh"></i>Yenile</button>
							</div>			
										
										
						
						 <div class="row">
							 <div class="col-lg-6 grid-margin stretch-card" id="graph" >
							  <div class="card" >
								<div class="card-body" id="graph-container">
								  <h4 class="card-title">Adım Grafiği</h4>
								  <canvas id="mybar" style="height:400px"></canvas>
								</div>
							  </div>
							</div>
							<div class="col-lg-6" id="radargraph">
                                <div class="au-card m-b-30">
                                    <div class="au-card-inner" id="radargraphcontainer">
                                        <h3 class="title-2 m-b-40">Dağılım Grafiği</h3>
                                        <canvas id="radar"></canvas>
                                    </div>
                                </div>
                            </div>
							</div>
							<div class="row">
							
							<div class="col-lg-6 grid-margin stretch-card" id="sonchartgraph">
								  <div class="card">
									<div class="card-body" id="sonchartcontainer">
									  <h4 class="card-title">Dilim Grafiği</h4>
									  <canvas id="son_chart" style="height:250px"></canvas>
									</div>
								  </div>
								</div>
							
							</div>
							
					
					</div>
				
				</div>
			
			</div>
		</div>
		
</div>



    <!-- Jquery JS-->
    <script src="vendor/jquery-3.2.1.min.js"></script>
    <!-- Bootstrap JS-->
    <script src="vendor/bootstrap-4.1/popper.min.js"></script>
    <script src="vendor/bootstrap-4.1/bootstrap.min.js"></script>
    <!-- Vendor JS       -->
    <script src="vendor/slick/slick.min.js">
    </script>
    <script src="vendor/wow/wow.min.js"></script>
    <script src="vendor/animsition/animsition.min.js"></script>
    <script src="vendor/bootstrap-progressbar/bootstrap-progressbar.min.js">
    </script>
    <script src="vendor/counter-up/jquery.waypoints.min.js"></script>
    <script src="vendor/counter-up/jquery.counterup.min.js">
    </script>
    <script src="vendor/circle-progress/circle-progress.min.js"></script>
    <script src="vendor/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="vendor/chartjs/Chart.bundle.min.js"></script>
    <script src="vendor/select2/select2.min.js">
    </script>

    <!-- Main JS-->
    <script src="js/main.js"></script>
	
	<!---- Firebase----->
		<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyAulrnt3RBkoGS6LVa10bPsZ46fHa9FaSk",
    authDomain: "health-band-database-153fe.firebaseapp.com",
    databaseURL: "https://health-band-database-153fe.firebaseio.com",
    projectId: "health-band-database-153fe",
    storageBucket: "health-band-database-153fe.appspot.com",
    messagingSenderId: "1067278296627",
    appId: "1:1067278296627:web:06d7f378ecffdb6d"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>

<script>


// Call addRow() with the table's ID

</script>
<script> 

var zaman = localStorage.getItem('zaman');
var label = localStorage.getItem('label_time');
var ayakta_bekleme = localStorage.getItem('ayakta_bekleme');
var merdiven_cikmak = localStorage.getItem('merdiven_cikmak');
var merdiven_inmek = localStorage.getItem('merdiven_inmek');
var yuruyus_yapmak = localStorage.getItem('yuruyus_yapmak');
var uyku = localStorage.getItem('uyku');

var uyku_array = uyku.split(",");
var zaman_array = zaman.split(",");
var label_array = label.split(",");
var ayakta_bekleme_array = ayakta_bekleme.split(",");
var merdiven_cikmak_array = merdiven_cikmak.split(",");
var merdiven_inmek_array = merdiven_inmek.split(",");
var yuruyus_yapmak_array = yuruyus_yapmak.split(",");





var new_zaman_array = new Array();
var new_label_array = new Array();
var new_ayakta_bekleme_array =  new Array();
var new_merdiven_cikmak_array = new Array();
var new_merdiven_inmek_array =  new Array();
var new_yuruyus_yapmak_array =  new Array();
var new_uyku_array = new Array();






for(var i=0;240>i;i++){
	if(Object.keys(zaman_array).length >= i ){
	new_zaman_array[i] = zaman_array[i];
	new_label_array[i] = label_array[i];
	new_ayakta_bekleme_array[i] = ayakta_bekleme_array[i];
	new_merdiven_cikmak_array[i] = merdiven_cikmak_array[i];
	new_merdiven_inmek_array[i] = merdiven_inmek_array[i];
	new_yuruyus_yapmak_array[i] = yuruyus_yapmak_array[i];
	new_uyku_array[i] = uyku_array[i];
	
	}

	}



function resetCanvas(){
  $('#mybar').remove(); // this is my <canvas> element
  $('#graph-container').append('<canvas id="mybar"><canvas>');
  canvas = document.querySelector('#mybar');
  ctx = canvas.getContext('2d');
  ctx.canvas.width  = window.innerWidth;
  ctx.canvas.height = window.innerHeight;
  var x = canvas.width/2;
  var y = canvas.height/2;
  ctx.font = '10pt Verdana';
  ctx.textAlign = 'center';
  ctx.fillText('This text is centered on the canvas', x, y);
  
  
   $('#radar').remove(); // this is my <canvas> element
  $('#radargraphcontainer').append('<canvas id="radar"><canvas>');
  canvas = document.querySelector('#radar');
  ctx = canvas.getContext('2d');
  ctx.canvas.width = $('#radargraph').width(); // resize to parent width
  ctx.canvas.height = $('#radargraph').height(); // resize to parent height
  var x = canvas.width/2;
  var y = canvas.height/2;
  ctx.font = '10pt Verdana';
  ctx.textAlign = 'center';
  ctx.fillText('This text is centered on the canvas', x, y);
  
  
  
   $('#son_chart').remove(); // this is my <canvas> element
  $('#sonchartcontainer').append('<canvas id="son_chart"><canvas>');
  canvas = document.querySelector('#son_chart');
  ctx = canvas.getContext('2d');
 // ctx.canvas.width = $('#sonchartgraph').width(); // resize to parent width
  //ctx.canvas.height = $('#sonchartgraph').height(); // resize to parent height
  var x = canvas.width/2;
  var y = canvas.height/2;
  ctx.font = '10pt Verdana';
  ctx.textAlign = 'center';
  ctx.fillText('This text is centered on the canvas', x, y);
  
  
  
  
};
//initial refresh
grafik();
radar();

function grafik(){
		  
	resetCanvas();
		
	
  
   var options = {
    scales: {
      yAxes: [{
        ticks: {
          beginAtZero: true
        }
      }]
    },
    legend: {
      display: false
    },
    elements: {
      point: {
        radius: 0
      }
    }

  };
	
	
	
	
	  if ($("#mybar").length) {
    var barChartCanvas = $("#mybar").get(0).getContext("2d");
    // This will get the first returned node in the jQuery collection.
	
	
	
    var barChart = new Chart(barChartCanvas, {
      type: 'bar',
      data:  {
    labels: new_label_array,
    datasets: [{
      label: 'Adım Sys',
      data: new_zaman_array,
      backgroundColor: [
        'rgba(255, 99, 132, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(255, 206, 86, 0.2)',
        'rgba(75, 192, 192, 0.2)',
        'rgba(153, 102, 255, 0.2)',
        'rgba(255, 159, 64, 0.2)'
      ],
      borderColor: "rgba(0, 123, 255, 0.7",
      borderWidth: 1
    }]
  },
      options: options
    });
  }
  
  
   var uyku_sum=0,ayak_sum=0,mc_sum=0,mi_sum=0,yuru_sum=0;
	
	for(var i=0;240>i;i++){
	
		uyku_sum += parseInt(new_uyku_array[i]);
		ayak_sum += parseInt(new_ayakta_bekleme_array[i]);
		mc_sum   += parseInt(new_merdiven_cikmak_array[i]);
		mi_sum   += parseInt(new_merdiven_inmek_array[i]);
		yuru_sum += parseInt(new_yuruyus_yapmak_array[i]);
	
	}

var aktiviteler = new Array();
aktiviteler[0]=uyku_sum;
aktiviteler[1]=ayak_sum;
aktiviteler[2]=mc_sum;
aktiviteler[3]=mi_sum;
aktiviteler[4]=yuru_sum;

  var doughnutPieData = {
    datasets: [{
      data: aktiviteler,
      backgroundColor: [
        'rgba(255, 99, 132, 0.5)',
        'rgba(54, 162, 235, 0.5)',
        'rgba(255, 206, 86, 0.5)',
        'rgba(75, 192, 192, 0.5)',
        'rgba(153, 102, 255, 0.5)',
        'rgba(255, 159, 64, 0.5)'
      ],
      borderColor: [
        'rgba(255,99,132,1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)',
        'rgba(153, 102, 255, 1)',
        'rgba(255, 159, 64, 1)'
      ],
    }],

    // These labels appear in the legend and in the tooltips when hovering different arcs
    labels: [
      'Uyku',
      'Yürüyüş',
      'Ayakta Bekleme',
	  'Merdiven Çıkmak',
	  'Merdiven İnmek'
    ]
  };
  var doughnutPieOptions = {
    responsive: true,
    animation: {
      animateScale: true,
      animateRotate: true
    }
  };
  
  
  
  
	 if ($("#son_chart").length) {
    var doughnutChartCanvas = $("#son_chart").get(0).getContext("2d");
    var doughnutChart = new Chart(doughnutChartCanvas, {
      type: 'doughnut',
      data: doughnutPieData,
      options: doughnutPieOptions
    });
  }
  
  
  
  
  
  
  
  
  
	}
	
	
 
	
	function radar() {
	
	var uyku_sum=0,ayak_sum=0,mc_sum=0,mi_sum=0,yuru_sum=0;
	
	for(var i=0;240>i;i++){
	
		uyku_sum += parseInt(new_uyku_array[i]);
		ayak_sum += parseInt(new_ayakta_bekleme_array[i]);
		mc_sum   += parseInt(new_merdiven_cikmak_array[i]);
		mi_sum   += parseInt(new_merdiven_inmek_array[i]);
		yuru_sum += parseInt(new_yuruyus_yapmak_array[i]);
	
	}

var aktiviteler = new Array();
aktiviteler[0]=uyku_sum;
aktiviteler[1]=ayak_sum;
aktiviteler[2]=mc_sum;
aktiviteler[3]=mi_sum;
aktiviteler[4]=yuru_sum;
	
	
	
	console.log(aktiviteler);
	
	try {

    //radar chart
    var ctx = document.getElementById("radar");
    if (ctx) {
     ctx.height = 300;
	  ctx.width = 600;
      var myChart = new Chart(ctx, {
        type: 'radar',
        data: {
          labels: ["Uyku",  ["Ayakta", "Beklemek"],["Merdiven", "Çıkmak"], ["Merdiven", "İnmek"],"Yürüyüş"],
          defaultFontFamily: 'Poppins',
          datasets: [
            
            {
              label: "Aktiviteler",
              data: aktiviteler,
              borderColor: "rgba(0, 123, 255, 0.7",
              borderWidth: "1",
              backgroundColor: "rgba(0, 123, 255, 0.5)"
            }
          ]
        },
        options: {
          legend: {
            position: 'top',
            labels: {
              fontFamily: 'Poppins'
            }

          },
          scale: {
            ticks: {
              beginAtZero: true,
              fontFamily: "Poppins"
            }
          }
        }
      });
    }

  } catch (error) {
    console.log(error)
  }
	
	
	}
	
	
	
function ileri() {
  var sayfa_num = $("#sayfa_num").text();
  var plus = parseInt(sayfa_num)+1;	

    $("#sayfa_num").text("\xa0\xa0"+plus.toString()+"\xa0\xa0");

    for(var i=0+(240* (parseInt(plus)-1) );240+(240* (parseInt(plus)-1) )>i;i++){

      if(Object.keys(zaman_array).length >= i ){
        new_zaman_array[i-(240* (parseInt(plus)-1) )] = zaman_array[i];
        new_ayakta_bekleme_array[i-(240* (parseInt(plus)-1) )] = ayakta_bekleme_array[i];
        new_merdiven_cikmak_array[i-(240* (parseInt(plus)-1) )] = merdiven_cikmak_array[i];
        new_merdiven_inmek_array[i-(240* (parseInt(plus)-1) )] = merdiven_inmek_array[i];
        new_yuruyus_yapmak_array[i-(240* (parseInt(plus)-1) )] = yuruyus_yapmak_array[i];
        new_uyku_array[i-(240* (parseInt(plus)-1) )] = uyku_array[i];

      }

    }

    grafik();
    radar();
  


}
function geri() {

  var sayfa_num = $("#sayfa_num").text();
  if(parseInt(sayfa_num) > 1){

    var plus = parseInt(sayfa_num)-1;
    $("#sayfa_num").text("\xa0\xa0"+plus+"\xa0\xa0");
    
}


  for(var i=0+(240* (parseInt(plus)-1) );240+(240* (parseInt(plus)-1) )>i;i++) {

    if(Object.keys(zaman_array).length >= i ){
    new_zaman_array[i-(240* (parseInt(plus)-1) )] = zaman_array[i];
    new_ayakta_bekleme_array[i-(240* (parseInt(plus)-1) )] = ayakta_bekleme_array[i];
    new_merdiven_cikmak_array[i-(240* (parseInt(plus)-1) )] = merdiven_cikmak_array[i];
    new_merdiven_inmek_array[i-(240* (parseInt(plus)-1) )] = merdiven_inmek_array[i];
    new_yuruyus_yapmak_array[i-(240* (parseInt(plus)-1) )] = yuruyus_yapmak_array[i];
    new_uyku_array[i-(240* (parseInt(plus)-1) )] = uyku_array[i];
    }

  }



  grafik();
  radar();
}
	
	
	 
	
	
	</script>


	
	
	
</body>
</html>



